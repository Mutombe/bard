# Generated by Django 4.2.27 on 2026-01-25 13:05

from django.db import migrations, models
import django.utils.timezone


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='ArticleAnalytics',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, help_text='Timestamp when the record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='Timestamp when the record was last updated')),
                ('date', models.DateField(db_index=True, verbose_name='Date')),
                ('hour', models.PositiveSmallIntegerField(default=0, help_text='Hour of day (0-23)', verbose_name='Hour')),
                ('page_views', models.PositiveIntegerField(default=0)),
                ('unique_visitors', models.PositiveIntegerField(default=0)),
                ('avg_time_on_page', models.PositiveIntegerField(default=0, help_text='Average time in seconds')),
                ('scroll_depth_avg', models.DecimalField(decimal_places=2, default=0, help_text='Average scroll depth percentage', max_digits=5)),
                ('bounce_rate', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('social_shares', models.PositiveIntegerField(default=0)),
                ('comments', models.PositiveIntegerField(default=0)),
                ('source_direct', models.PositiveIntegerField(default=0)),
                ('source_search', models.PositiveIntegerField(default=0)),
                ('source_social', models.PositiveIntegerField(default=0)),
                ('source_referral', models.PositiveIntegerField(default=0)),
                ('source_email', models.PositiveIntegerField(default=0)),
                ('device_desktop', models.PositiveIntegerField(default=0)),
                ('device_mobile', models.PositiveIntegerField(default=0)),
                ('device_tablet', models.PositiveIntegerField(default=0)),
            ],
            options={
                'verbose_name': 'Article Analytics',
                'verbose_name_plural': 'Article Analytics',
            },
        ),
        migrations.CreateModel(
            name='ContentPerformance',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, help_text='Timestamp when the record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='Timestamp when the record was last updated')),
                ('total_views', models.BigIntegerField(default=0)),
                ('unique_visitors', models.BigIntegerField(default=0)),
                ('avg_read_time', models.PositiveIntegerField(default=0, help_text='Average read time in seconds')),
                ('completion_rate', models.DecimalField(decimal_places=2, default=0, help_text='Percentage of users who read to the end', max_digits=5)),
                ('total_shares', models.PositiveIntegerField(default=0)),
                ('total_comments', models.PositiveIntegerField(default=0)),
                ('engagement_score', models.DecimalField(decimal_places=2, default=0, help_text='Calculated engagement score (0-100)', max_digits=5)),
                ('search_impressions', models.BigIntegerField(default=0)),
                ('search_clicks', models.BigIntegerField(default=0)),
                ('avg_search_position', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('views_7d', models.PositiveIntegerField(default=0)),
                ('views_30d', models.PositiveIntegerField(default=0)),
                ('trend_direction', models.CharField(choices=[('up', 'Up'), ('down', 'Down'), ('stable', 'Stable')], default='stable', max_length=10)),
                ('trend_percentage', models.DecimalField(decimal_places=2, default=0, max_digits=6)),
                ('last_calculated', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Content Performance',
                'verbose_name_plural': 'Content Performance',
            },
        ),
        migrations.CreateModel(
            name='DailyMetrics',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, help_text='Timestamp when the record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='Timestamp when the record was last updated')),
                ('date', models.DateField(db_index=True, unique=True, verbose_name='Date')),
                ('total_page_views', models.BigIntegerField(default=0)),
                ('total_unique_visitors', models.BigIntegerField(default=0)),
                ('total_sessions', models.BigIntegerField(default=0)),
                ('articles_published', models.PositiveIntegerField(default=0)),
                ('articles_updated', models.PositiveIntegerField(default=0)),
                ('articles_scraped', models.PositiveIntegerField(default=0)),
                ('new_users', models.PositiveIntegerField(default=0)),
                ('active_users', models.PositiveIntegerField(default=0)),
                ('new_subscribers', models.PositiveIntegerField(default=0)),
                ('churned_subscribers', models.PositiveIntegerField(default=0)),
                ('newsletter_sends', models.PositiveIntegerField(default=0)),
                ('newsletter_opens', models.PositiveIntegerField(default=0)),
                ('newsletter_clicks', models.PositiveIntegerField(default=0)),
                ('price_alerts_sent', models.PositiveIntegerField(default=0)),
                ('market_data_updates', models.PositiveIntegerField(default=0)),
                ('api_requests', models.BigIntegerField(default=0)),
                ('avg_response_time_ms', models.PositiveIntegerField(default=0)),
                ('error_count', models.PositiveIntegerField(default=0)),
            ],
            options={
                'verbose_name': 'Daily Metrics',
                'verbose_name_plural': 'Daily Metrics',
                'ordering': ['-date'],
            },
        ),
        migrations.CreateModel(
            name='GeographicAnalytics',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, help_text='Timestamp when the record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='Timestamp when the record was last updated')),
                ('date', models.DateField(db_index=True, verbose_name='Date')),
                ('page_views', models.BigIntegerField(default=0)),
                ('unique_visitors', models.BigIntegerField(default=0)),
                ('sessions', models.BigIntegerField(default=0)),
                ('avg_session_duration', models.PositiveIntegerField(default=0, help_text='Seconds')),
                ('bounce_rate', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('new_users', models.PositiveIntegerField(default=0)),
                ('returning_users', models.PositiveIntegerField(default=0)),
            ],
            options={
                'verbose_name': 'Geographic Analytics',
                'verbose_name_plural': 'Geographic Analytics',
                'ordering': ['-date', '-page_views'],
            },
        ),
        migrations.CreateModel(
            name='ScrapingMetrics',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, help_text='Timestamp when the record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='Timestamp when the record was last updated')),
                ('spider_type', models.CharField(choices=[('jse', 'JSE Spider'), ('zse', 'ZSE Spider'), ('bse', 'BSE Spider'), ('news', 'News Spider'), ('forex', 'Forex Spider')], max_length=20, verbose_name='Spider Type')),
                ('date', models.DateField(db_index=True, verbose_name='Date')),
                ('run_count', models.PositiveIntegerField(default=0)),
                ('success_count', models.PositiveIntegerField(default=0)),
                ('failure_count', models.PositiveIntegerField(default=0)),
                ('avg_run_time_seconds', models.PositiveIntegerField(default=0)),
                ('items_scraped', models.PositiveIntegerField(default=0)),
                ('items_validated', models.PositiveIntegerField(default=0)),
                ('items_rejected', models.PositiveIntegerField(default=0)),
                ('duplicate_count', models.PositiveIntegerField(default=0)),
                ('error_details', models.JSONField(default=list, verbose_name='Error Details')),
                ('requests_made', models.PositiveIntegerField(default=0)),
                ('bytes_downloaded', models.BigIntegerField(default=0)),
                ('avg_response_time_ms', models.PositiveIntegerField(default=0)),
            ],
            options={
                'verbose_name': 'Scraping Metrics',
                'verbose_name_plural': 'Scraping Metrics',
                'ordering': ['-date'],
            },
        ),
        migrations.CreateModel(
            name='SystemHealth',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, help_text='Timestamp when the record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='Timestamp when the record was last updated')),
                ('timestamp', models.DateTimeField(db_index=True, default=django.utils.timezone.now, verbose_name='Timestamp')),
                ('api_response_time_avg', models.PositiveIntegerField(default=0, help_text='Average response time in ms')),
                ('api_response_time_p95', models.PositiveIntegerField(default=0, help_text='95th percentile response time in ms')),
                ('api_requests_total', models.PositiveIntegerField(default=0)),
                ('api_errors', models.PositiveIntegerField(default=0)),
                ('db_query_time_avg', models.PositiveIntegerField(default=0)),
                ('db_connections_active', models.PositiveIntegerField(default=0)),
                ('db_connections_idle', models.PositiveIntegerField(default=0)),
                ('cache_hit_rate', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('cache_memory_used_mb', models.PositiveIntegerField(default=0)),
                ('celery_queued_tasks', models.PositiveIntegerField(default=0)),
                ('celery_active_workers', models.PositiveIntegerField(default=0)),
                ('celery_failed_tasks', models.PositiveIntegerField(default=0)),
                ('cpu_usage_percent', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('memory_usage_percent', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('disk_usage_percent', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
            ],
            options={
                'verbose_name': 'System Health',
                'verbose_name_plural': 'System Health',
                'ordering': ['-timestamp'],
            },
        ),
        migrations.CreateModel(
            name='TopContent',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, help_text='Timestamp when the record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='Timestamp when the record was last updated')),
                ('period', models.CharField(choices=[('today', 'Today'), ('week', 'This Week'), ('month', 'This Month'), ('all_time', 'All Time')], max_length=20, verbose_name='Period')),
                ('rank', models.PositiveSmallIntegerField(verbose_name='Rank')),
                ('metric_value', models.BigIntegerField(help_text='Views, shares, or engagement score', verbose_name='Metric Value')),
                ('metric_type', models.CharField(default='views', max_length=20, verbose_name='Metric Type')),
            ],
            options={
                'verbose_name': 'Top Content',
                'verbose_name_plural': 'Top Content',
                'ordering': ['period', 'rank'],
            },
        ),
        migrations.CreateModel(
            name='UserActivityLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, help_text='Timestamp when the record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='Timestamp when the record was last updated')),
                ('session_id', models.CharField(blank=True, max_length=100, verbose_name='Session ID')),
                ('activity_type', models.CharField(choices=[('page_view', 'Page View'), ('article_read', 'Article Read'), ('search', 'Search'), ('login', 'Login'), ('logout', 'Logout'), ('watchlist_add', 'Watchlist Add'), ('watchlist_remove', 'Watchlist Remove'), ('nl_subscribe', 'Newsletter Subscribe'), ('alert_create', 'Price Alert Create'), ('share', 'Share'), ('download', 'Download')], max_length=20, verbose_name='Type')),
                ('url', models.URLField(blank=True, verbose_name='URL')),
                ('referrer', models.URLField(blank=True, verbose_name='Referrer')),
                ('search_query', models.CharField(blank=True, max_length=500, verbose_name='Search Query')),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True, verbose_name='IP Address')),
                ('user_agent', models.TextField(blank=True, verbose_name='User Agent')),
                ('device_type', models.CharField(blank=True, max_length=20, verbose_name='Device Type')),
                ('country_code', models.CharField(blank=True, max_length=3, verbose_name='Country')),
                ('metadata', models.JSONField(default=dict, verbose_name='Metadata')),
            ],
            options={
                'verbose_name': 'User Activity Log',
                'verbose_name_plural': 'User Activity Logs',
                'ordering': ['-created_at'],
            },
        ),
    ]
